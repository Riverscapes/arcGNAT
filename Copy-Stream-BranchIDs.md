The **Copy Stream BranchIDs** tool moves the branch ID attribute values from one stream network to another. The stream networks may have identical geometry, or similar geometry (i.e. a stream network to a valley bottom centerline).

> Figure: Stream network BranchID's (blue) transferred to a valley centerline with similar (but not identical) geometry. The valley centerline now has the same BranchID (black).

This step is required if using the "Transfer by Branch" method in the [Transfer Line Attributes](https://github.com/SouthForkResearch/gnat/wiki/Transfer-Line-Attributes) tool, as both networks will need to have common stream branches.

_______________________________________________________________
## Usage

### Geoprocessing Environments
 
* We recommended the tool is run with 64-bit python geoprocessing.
* Disable Z and M geometry in the input stream network polyline feature class.

### Input Parameters

**Input Stream Network with BranchID**

The stream network polyline feature class that contains the stream BranchID _to be transferred_. This network should already have been generated by the [Generate Stream Branches](https://github.com/SouthForkResearch/gnat/wiki/Generate-Stream-Branches) tool.

Data Requirements: 

* Features should be in a projected coordinate system, not geographic.
* All stream reaches are connected as a network. This can be checked with the [Build Network Topology Table](https://github.com/SouthForkResearch/gnat/wiki/Build-Network-Topology-Table) tool and [Find Network Errors](https://github.com/SouthForkResearch/gnat/wiki/Find-Network-Errors). 
* Braids will cause the tool to get stuck in a loop. Braids can be identified and isolated by running the [Find Braids in Stream Network](https://github.com/SouthForkResearch/gnat/wiki/Find-Braids-in-Stream-Network) tool. Only one braid section should be identified as the main channel and retained. The connector segments and side channel should be removed. The GNIS name attribute can be used as a guide to identify the main channel, too).  
* File geodatabase polyline feature class (due to field requirements)
* Z and M geometry in the Shape field is disabled.
* Single part features

**Stream BranchID Field**

Field containing the stream branch ID values.

**Input Target Line Network**

This is the stream network polyline feature class that the stream BranchID _will be transferred to_. 

Data Requirements: 

* same as Input Stream Network with BranchID

**Output Line Network with BranchID**

File name and directory path (in a file geodatabase) of a new polyline feature class containing the transferred stream branch ID. Field name will be the same as the BranchID field of the input.

**Scratch Workspace**

1. Can be a file geodatabase or folder.
2. If not explicitly designated, the tool will use the "in_memory" workspace by default. Temporary files will not be available for review, but the processing speed will likely be much faster.

_______________________________________________________________
## Technical Background

### Troubleshooting and Potential Issues

* The **Copy Stream BranchIDs** tool is currently designed to work with a specific workflow for generating stream branches. Omitting a workflow step or clean-up process may result in erroneous results or tool failure.