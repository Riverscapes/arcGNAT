<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>GNAT</title>

      <meta name="viewport" content="width=device-width">
      <link rel="stylesheet" href="/assets/css/app.css">
      <link rel="stylesheet" href="/assets/css/custom.css">
      <script src="https://use.fontawesome.com/586b1e1322.js"></script>

      <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicons/apple-icon-57x57.png">
      <link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicons/apple-icon-60x60.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicons/apple-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicons/apple-icon-76x76.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicons/apple-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicons/apple-icon-120x120.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicons/apple-icon-144x144.png">
      <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicons/apple-icon-152x152.png">
      <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-icon-180x180.png">
      <link rel="icon" type="image/png" sizes="192x192"  href="/assets/images/favicons/android-icon-192x192.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="96x96" href="/assets/images/favicons/favicon-96x96.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png">
      <link rel="manifest" href="/assets/images/favicons/manifest.json">
      <meta name="msapplication-TileColor" content="#ffffff">
      <meta name="msapplication-TileImage" content="/assets/images/favicons/ms-icon-144x144.png">
      <meta name="theme-color" content="#ffffff">

      <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
  </head>

  <body>

  <header>
    <div id="topbarnav"></div>
    <div id="headcallout" class="text-center callout large">
      

      
      <h4 class="subheader show-for-medium"><a href="/">GNAT</a></h4>   
      <h1>Find Subnetworks</h1>
            
      
    </div>
  </header>

  <div id="inner-wrapper">
    <div id="inner" class="row">
      <div id="main" class="large-8 columns large-push-4">
        <section><p>The <strong>Find Subnetworks</strong> tool finds all disconnected networks (i.e. “subnetworks”) within a polyline shapefile, and labels all stream 
features within each disconnected network with a unique identifier code.  The tool assumes that the input stream network
is (or is derived from) a USGS NHD flowline dataset. The tool can optionally find topological errors within the 
input network, including:</p>

<ul>
  <li>Duplicate reaches</li>
  <li>Confluence errors</li>
  <li>Multiple outflows</li>
</ul>

<p><strong>Illustrated examples of topographic error</strong></p>

<table>
  <thead>
    <tr>
      <th>Error   Type</th>
      <th style="text-align: left">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Duplicate reaches</td>
      <td style="text-align: left"><img src="/images/error_dupe.png" alt="error_duplicate" /></td>
    </tr>
    <tr>
      <td>Confluence errors</td>
      <td style="text-align: left"><img src="/images/error_conf.png" alt="error_confluence" /></td>
    </tr>
    <tr>
      <td>Multiple outflows</td>
      <td style="text-align: left"><img src="/images/error_out.png" alt="error_outflow" /></td>
    </tr>
  </tbody>
</table>

<h2 id="usage">Usage</h2>

<h3 id="requirements">Requirements</h3>

<ul>
  <li><strong>ArcGIS</strong>: version 10.4 or higher</li>
  <li><strong>GDAL</strong>: A separate installation of the <a href="https://www.gdal.org">Geospatial Data Abstraction Library</a> is required by this tool, in order 
to directly convert between shapefiles and NetworkX graphs. Because GNAT users must operate ArcGIS in a Windows 
environment, we strongly recommend that the user installs GDAL separately using the Windows binaries offered by 
Tamas Szekeres at <a href="http://www.gisinternals.com/">GISInternals</a>. Detailed instructions for installing the GDAL binaries
area available <a href="https://sandbox.idre.ucla.edu/sandbox/tutorials/installing-gdal-for-windows">here</a>.</li>
  <li><strong>NetworkX 1.11</strong>: Please note, GNAT has only been tested with version 1.11. Other versions have not been tested and
are not currently supported.</li>
</ul>

<h3 id="input-parameters">Input Parameters</h3>

<p><img src="/images/find_subnetworks_form.PNG" alt="find_subnetworks_form" /></p>

<p><strong>Input stream network shapefile</strong></p>

<p>Stream network shapefile representing a drainage network. Ideally this network should be a USGS NHD flowline
dataset, or derived from NHD. Also, all canal features (i.e. <code class="highlighter-rouge">FCode = 336</code>) MUST be removed prior to running the tool.
Removing canal features will create disconnected subnetworks within the overall stream network, each of which will be 
assigned a unique identifier code by the tool.</p>

<h3 id="outputs">Outputs</h3>

<p><strong>Output shapefile</strong></p>

<p>Stream network polyline shapefile generated by the tool, which will include new attribute fields. These new 
attribute fields include:</p>

<ul>
  <li><code class="highlighter-rouge">_FID_</code> : unique identifier for each line feature</li>
  <li><code class="highlighter-rouge">_netid_</code> : unique identifier for each subnetwork</li>
</ul>

<p><strong>Find topology errors (optional)</strong></p>

<p>If this option is selected, the <strong>Find Subnetworks</strong> tool will attempt to find and label topological errors. New 
attribute fields will be added to the output shapefile, including:</p>
<ul>
  <li><code class="highlighter-rouge">_err_dupe_</code> : boolean value indicates if the line feature is a duplicate of another feature (based on calculate 
length).</li>
  <li><code class="highlighter-rouge">_err_conf_</code> : boolean value indicates if the line feature has an upstream flow direction.</li>
  <li><code class="highlighter-rouge">_err_out_</code> : boolean indicates either a problem with flow direction (multiple reachs flowing to the same node) or a
subnetwork where the number of outflow features != 0.</li>
</ul>

<hr />
<h2 id="technical-background">Technical Background</h2>

<h3 id="calculation-method">Calculation Method</h3>

<p>The <strong>Find Subnetworks</strong> tool relies on the excellent <a href="https://networkx.github.io/documentation/networkx-1.11/">NetworkX</a> 
python library, which is in turn based on <a href="https://en.wikipedia.org/wiki/Graph_theory">graph theory</a> concepts. 
The tool converts the input stream network shapefile into a graph object (composed of “edges” and “nodes”), which is 
how the file is then processed throughout the workflow, until being converted back into a shapefile.</p>

<h3 id="post-processing">Post-processing</h3>

<p><img src="/images/find_subnetworks_output.PNG" alt="find_subnetworks_output" /></p>

<p>After the <strong>Find Subnetworks</strong> tool is finished processing, the user can decide which subnets should remain disconnected
from the main network, and which should be edited so that they are connected. Subnetworks can be visualized in ArcMap 
using the <code class="highlighter-rouge">_netid_</code> attribute field. In addition, the location of topological errors within the subnetworks can be 
reviewed by symbolizing the <code class="highlighter-rouge">_err_dupe_</code>, <code class="highlighter-rouge">_err_conf_</code>, and <code class="highlighter-rouge">_err_out</code> attribute fields in the output shapefile. The 
user can then utilize ArcMap editing tools to manual edit these features if they are actual topological errors.</p>

<p>This process can then be repeated by running the repaired stream network shapefile through the <strong>Find Subnetworks</strong> tool 
to find any missed errors.</p>

<h3 id="troubleshooting-and-potential-issues">Troubleshooting and Potential Issues</h3>

<p>The errors found by the <strong>Find Subnetworks</strong> tool should only be viewed as <em>potential errors</em>. 
Whether or not a stream feature actually has a topological error, and how it should be corrected, is up to the user and 
should be determined on a case-by-case basis. In addition, stream reach features that are adjacent and/or nearby should
 also be examined.</p>
</section>
      </div>
      <div id="sidebar" class="large-4 columns large-pull-8">
          
	
	<div class="title-bar">
		<div class="title-bar-title"><i class="fa fa-file-text"></i> Page Contents</div>		
	</div>
	<div id="toc"></div>
	


<div class="title-bar">
	<div class="title-bar-title"><i class="fa fa-sitemap"></i> Site Contents
		<div id="menuCtls" class="button-group tiny show-for-medium">
				<span id="expand" class="button primary fa fa-plus has-tip top" data-tooltip title="Expand all items" aria-haspopup="true" data-disable-hover="false" ></span>
				<span id="contract" class="button primary fa fa-minus has-tip top" data-tooltip title="Contract all items" aria-haspopup="true" data-disable-hover="false" ></span>
			</div>	
	</div>
</div>
<div id="sidenav">
			<ul id='HTMLOnlyNav'>							<li><a href='/About-GNAT-Projects.html'>Riverscapes Projects</a></li>							<li><a href='/Build-Network-Topology-Table.html'>Build Network Topology Table</a></li>							<li><a href='/Calculate-Gradient.html'>Calculate Gradient</a></li>							<li><a href='/Calculate-Threadedness.html'>Calculate Threadedness</a></li>							<li><a href='/Centerline-Tool.html'>Centerline Tool</a></li>							<li><a href='/CombineAttributes.html'>Combine Attributes</a></li>							<li><a href='/Divide-Polygon-by-Segments.html'>Divide Polygons by Segments</a></li>							<li><a href='/Find-Braids-in-Stream-Network.html'>Find Braids in Stream Network</a></li>							<li><a href='/Find-Subnetworks.html'>Find Subnetworks</a></li>							<li><a href='/Generate-Network-Attributes.html'>Generate Network Attributes</a></li>							<li><a href='/Generate-Stream-Branches.html'>Generate Stream Branches</a></li>							<li><a href='/Generate-Stream-Order.html'>Generate Stream Order</a></li>							<li><a href='/Project_CommitRealization.html'>Commit Realization</a></li>							<li><a href='/Project_LoadNetwork.html'>Load Input Datsets</a></li>							<li><a href='/Project_NewGNATProject.html'>Create a New GNAT Project</a></li>							<li><a href='/Segment-Stream-Network.html'>Segment Stream Network</a></li>							<li><a href='/Sinuosity-by-Segment.html'>Sinousity by Segment</a></li>							<li><a href='/Stream-Network-Prep.html'>Stream Network Preparation</a></li>							<li><a href='/Stream-Sinuosity-and-Planform.html'>Stream Sinousity and Planform</a></li>							<li><a href='/Transfer-Line-Attributes.html'>Transfer Line Attributes</a></li>							<li><a href='/'>Home</a></li>		</ul>	
</div>

        </div>
    </div>
  </div>


    <footer id="footer" class="row">
<div id="rightslogo">
    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
        <img src="/assets/images/cc-watermarks-riverscapes_orig.png" alt="Picture">
    </a>
</div>
</footer>
    <script type="text/javascript">var NAVTitle = "GNAT";var NAVHome = "";var NAVPages = [{url: "/About-GNAT-Projects.html",absurl: "/About-GNAT-Projects.html",slug: "About-GNAT-Projects.html",title: "Riverscapes Projects",weight: ""},{url: "/Build-Network-Topology-Table.html",absurl: "/Build-Network-Topology-Table.html",slug: "Build-Network-Topology-Table.html",title: "Build Network Topology Table",weight: ""},{url: "/Calculate-Gradient.html",absurl: "/Calculate-Gradient.html",slug: "Calculate-Gradient.html",title: "Calculate Gradient",weight: ""},{url: "/Calculate-Threadedness.html",absurl: "/Calculate-Threadedness.html",slug: "Calculate-Threadedness.html",title: "Calculate Threadedness",weight: ""},{url: "/Centerline-Tool.html",absurl: "/Centerline-Tool.html",slug: "Centerline-Tool.html",title: "Centerline Tool",weight: ""},{url: "/CombineAttributes.html",absurl: "/CombineAttributes.html",slug: "CombineAttributes.html",title: "Combine Attributes",weight: ""},{url: "/Divide-Polygon-by-Segments.html",absurl: "/Divide-Polygon-by-Segments.html",slug: "Divide-Polygon-by-Segments.html",title: "Divide Polygons by Segments",weight: ""},{url: "/Find-Braids-in-Stream-Network.html",absurl: "/Find-Braids-in-Stream-Network.html",slug: "Find-Braids-in-Stream-Network.html",title: "Find Braids in Stream Network",weight: ""},{url: "/Find-Subnetworks.html",absurl: "/Find-Subnetworks.html",slug: "Find-Subnetworks.html",title: "Find Subnetworks",weight: ""},{url: "/Generate-Network-Attributes.html",absurl: "/Generate-Network-Attributes.html",slug: "Generate-Network-Attributes.html",title: "Generate Network Attributes",weight: ""},{url: "/Generate-Stream-Branches.html",absurl: "/Generate-Stream-Branches.html",slug: "Generate-Stream-Branches.html",title: "Generate Stream Branches",weight: ""},{url: "/Generate-Stream-Order.html",absurl: "/Generate-Stream-Order.html",slug: "Generate-Stream-Order.html",title: "Generate Stream Order",weight: ""},{url: "/Project_CommitRealization.html",absurl: "/Project_CommitRealization.html",slug: "Project_CommitRealization.html",title: "Commit Realization",weight: ""},{url: "/Project_LoadNetwork.html",absurl: "/Project_LoadNetwork.html",slug: "Project_LoadNetwork.html",title: "Load Input Datsets",weight: ""},{url: "/Project_NewGNATProject.html",absurl: "/Project_NewGNATProject.html",slug: "Project_NewGNATProject.html",title: "Create a New GNAT Project",weight: ""},{url: "/Segment-Stream-Network.html",absurl: "/Segment-Stream-Network.html",slug: "Segment-Stream-Network.html",title: "Segment Stream Network",weight: ""},{url: "/Sinuosity-by-Segment.html",absurl: "/Sinuosity-by-Segment.html",slug: "Sinuosity-by-Segment.html",title: "Sinousity by Segment",weight: ""},{url: "/Stream-Network-Prep.html",absurl: "/Stream-Network-Prep.html",slug: "Stream-Network-Prep.html",title: "Stream Network Preparation",weight: ""},{url: "/Stream-Sinuosity-and-Planform.html",absurl: "/Stream-Sinuosity-and-Planform.html",slug: "Stream-Sinuosity-and-Planform.html",title: "Stream Sinousity and Planform",weight: ""},{url: "/Transfer-Line-Attributes.html",absurl: "/Transfer-Line-Attributes.html",slug: "Transfer-Line-Attributes.html",title: "Transfer Line Attributes",weight: ""},{url: "/",absurl: "/",slug: "",title: "Home",weight: ""},];var SiteSettings = {"autoPageContents":{"active":true,"onHome":false},"sideMenu":{"homeItem":true,"startExpanded":false},"topmenu":[{"title":"Riverscapes","childern":[{"title":"Model Home","url":"index"},{"title":"Riverscapes Home","url":"http://riverscapes.xyz"},{"title":"About Riverscapes","url":"http://riverscapes.xyz/about.html"},{"title":"Who We Are","url":"http://riverscapes.xyz/who-we-are.html"},{"title":"News","url":"http://riverscapes.xyz/news.html"}]},{"title":"RC Tools","url":"http://riverscapes.xyz/rc-tools.html"},{"title":"RC Science","url":"http://riverscapes.xyz/rc-science.html"},{"title":"RC Data","url":"http://riverscapes.xyz/rc-data.html"},{"title":"RC Help","url":"http://riverscapes.xyz/rc-help.html"}]};</script>

    <script src="/assets/js/dist.js"></script>

  </body>

</html>
